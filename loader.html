<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Loader | The AssemblyScript Book</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#007acc">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <meta name="description" content="How to make working with an AssemblyScript module more convenient.">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="preload" href="/assets/css/0.styles.26ffbfaa.css" as="style"><link rel="preload" href="/assets/js/app.3bfbe3db.js" as="script"><link rel="preload" href="/assets/js/4.f26c5c7a.js" as="script"><link rel="preload" href="/assets/js/3.afc46ada.js" as="script"><link rel="preload" href="/assets/js/37.d4f7dc90.js" as="script"><link rel="prefetch" href="/assets/js/10.de7a7cde.js"><link rel="prefetch" href="/assets/js/11.176e1fcc.js"><link rel="prefetch" href="/assets/js/12.1eedd210.js"><link rel="prefetch" href="/assets/js/13.8f66d60c.js"><link rel="prefetch" href="/assets/js/14.164cbab1.js"><link rel="prefetch" href="/assets/js/15.5d7d8243.js"><link rel="prefetch" href="/assets/js/16.a48e4831.js"><link rel="prefetch" href="/assets/js/17.18fdc0d6.js"><link rel="prefetch" href="/assets/js/18.7ea250b8.js"><link rel="prefetch" href="/assets/js/19.b267d181.js"><link rel="prefetch" href="/assets/js/20.874cab59.js"><link rel="prefetch" href="/assets/js/21.619df6b7.js"><link rel="prefetch" href="/assets/js/22.49f612ff.js"><link rel="prefetch" href="/assets/js/23.2c51f5bc.js"><link rel="prefetch" href="/assets/js/24.a1ff9d2a.js"><link rel="prefetch" href="/assets/js/25.8d46cad8.js"><link rel="prefetch" href="/assets/js/26.b1bbf2ed.js"><link rel="prefetch" href="/assets/js/27.207d7e85.js"><link rel="prefetch" href="/assets/js/28.c87cf7d1.js"><link rel="prefetch" href="/assets/js/29.e0c854f9.js"><link rel="prefetch" href="/assets/js/30.5561b81d.js"><link rel="prefetch" href="/assets/js/31.2e81b635.js"><link rel="prefetch" href="/assets/js/32.c4972e94.js"><link rel="prefetch" href="/assets/js/33.8094b774.js"><link rel="prefetch" href="/assets/js/34.ed66dd94.js"><link rel="prefetch" href="/assets/js/35.863d45c0.js"><link rel="prefetch" href="/assets/js/36.d1647a74.js"><link rel="prefetch" href="/assets/js/38.08673951.js"><link rel="prefetch" href="/assets/js/39.a485aaaf.js"><link rel="prefetch" href="/assets/js/40.711a3e49.js"><link rel="prefetch" href="/assets/js/41.84e9d7c1.js"><link rel="prefetch" href="/assets/js/42.ccafde17.js"><link rel="prefetch" href="/assets/js/43.4e3ef7ed.js"><link rel="prefetch" href="/assets/js/44.c7f82a7b.js"><link rel="prefetch" href="/assets/js/45.9a84226b.js"><link rel="prefetch" href="/assets/js/46.ef15c13a.js"><link rel="prefetch" href="/assets/js/47.ab720d56.js"><link rel="prefetch" href="/assets/js/48.8acdba7f.js"><link rel="prefetch" href="/assets/js/49.ae717977.js"><link rel="prefetch" href="/assets/js/5.33ca57d3.js"><link rel="prefetch" href="/assets/js/50.4a0ef59b.js"><link rel="prefetch" href="/assets/js/51.76a41f9b.js"><link rel="prefetch" href="/assets/js/52.c23e2ca7.js"><link rel="prefetch" href="/assets/js/53.44968460.js"><link rel="prefetch" href="/assets/js/54.3e231e34.js"><link rel="prefetch" href="/assets/js/55.8369cb83.js"><link rel="prefetch" href="/assets/js/56.225ceddd.js"><link rel="prefetch" href="/assets/js/57.6a3ae827.js"><link rel="prefetch" href="/assets/js/58.430ab2c8.js"><link rel="prefetch" href="/assets/js/59.cc78c913.js"><link rel="prefetch" href="/assets/js/6.15a88681.js"><link rel="prefetch" href="/assets/js/60.7042721e.js"><link rel="prefetch" href="/assets/js/61.7456c6ab.js"><link rel="prefetch" href="/assets/js/62.84eb8ec8.js"><link rel="prefetch" href="/assets/js/7.dd2b4d48.js"><link rel="prefetch" href="/assets/js/8.4819f6ec.js"><link rel="prefetch" href="/assets/js/9.d29764ca.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.7912142d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.26ffbfaa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-8ef39a8a><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/icon.svg" alt="The AssemblyScript Book" class="logo"> <span class="site-name can-hide">The AssemblyScript Book</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/introduction.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Standard library" class="dropdown-title"><span class="title">Standard library</span> <span class="arrow down"></span></button> <button type="button" aria-label="Standard library" class="mobile-dropdown-title"><span class="title">Standard library</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/stdlib/globals.html" class="nav-link">
  Globals
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/array.html" class="nav-link">
  Array
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/arraybuffer.html" class="nav-link">
  ArrayBuffer
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/dataview.html" class="nav-link">
  DataView
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/date.html" class="nav-link">
  Date
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/error.html" class="nav-link">
  Error
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/map.html" class="nav-link">
  Map
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/math.html" class="nav-link">
  Math
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/number.html" class="nav-link">
  Number
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/set.html" class="nav-link">
  Set
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/string.html" class="nav-link">
  String
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/symbol.html" class="nav-link">
  Symbol
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/typedarray.html" class="nav-link">
  TypedArray
</a></li><li class="dropdown-item"><h4>
          Extended
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/stdlib/staticarray.html" class="nav-link">
  StaticArray
</a></li><li class="dropdown-subitem"><a href="/stdlib/process.html" class="nav-link">
  process
</a></li><li class="dropdown-subitem"><a href="/stdlib/console.html" class="nav-link">
  console
</a></li><li class="dropdown-subitem"><a href="/stdlib/crypto.html" class="nav-link">
  crypto
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/examples.html" class="nav-link">
  Examples
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contributing guidelines
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/master/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Code of Conduct
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          Groups
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/AssemblyScript/community-group" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community Group
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/AssemblyScript/working-group" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Working Group
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Social
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://twitter.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://discord.gg/U63XU2J" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Q&amp;A
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://stackoverflow.com/questions/tagged/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Stack Overflow
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://opencollective.com/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/introduction.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Standard library" class="dropdown-title"><span class="title">Standard library</span> <span class="arrow down"></span></button> <button type="button" aria-label="Standard library" class="mobile-dropdown-title"><span class="title">Standard library</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/stdlib/globals.html" class="nav-link">
  Globals
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/array.html" class="nav-link">
  Array
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/arraybuffer.html" class="nav-link">
  ArrayBuffer
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/dataview.html" class="nav-link">
  DataView
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/date.html" class="nav-link">
  Date
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/error.html" class="nav-link">
  Error
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/map.html" class="nav-link">
  Map
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/math.html" class="nav-link">
  Math
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/number.html" class="nav-link">
  Number
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/set.html" class="nav-link">
  Set
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/string.html" class="nav-link">
  String
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/symbol.html" class="nav-link">
  Symbol
</a></li><li class="dropdown-item"><!----> <a href="/stdlib/typedarray.html" class="nav-link">
  TypedArray
</a></li><li class="dropdown-item"><h4>
          Extended
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/stdlib/staticarray.html" class="nav-link">
  StaticArray
</a></li><li class="dropdown-subitem"><a href="/stdlib/process.html" class="nav-link">
  process
</a></li><li class="dropdown-subitem"><a href="/stdlib/console.html" class="nav-link">
  console
</a></li><li class="dropdown-subitem"><a href="/stdlib/crypto.html" class="nav-link">
  crypto
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/examples.html" class="nav-link">
  Examples
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contributing guidelines
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/AssemblyScript/assemblyscript/blob/master/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Code of Conduct
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          Groups
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/AssemblyScript/community-group" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community Group
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/AssemblyScript/working-group" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Working Group
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Social
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://twitter.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://discord.gg/U63XU2J" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Q&amp;A
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://stackoverflow.com/questions/tagged/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Stack Overflow
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://opencollective.com/assemblyscript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/AssemblyScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/quick-start.html" class="sidebar-link">Quick Start</a></li><li><a href="/basics.html" class="sidebar-link">Basics</a></li><li><a href="/status.html" class="sidebar-link">Status</a></li><li><a href="/frequently-asked-questions.html" class="sidebar-link">Frequently asked questions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Documentation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/compiler.html" class="sidebar-link">Compiler</a></li><li><a href="/types.html" class="sidebar-link">Types</a></li><li><a href="/environment.html" class="sidebar-link">Environment</a></li><li><a href="/exports-and-imports.html" class="sidebar-link">Exports and imports</a></li><li><a href="/loader.html" aria-current="page" class="active sidebar-link">Loader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/loader.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/loader.html#usage" class="sidebar-link">Usage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/loader.html#creating-arrays" class="sidebar-link">Creating arrays</a></li><li class="sidebar-sub-header"><a href="/loader.html#reading-arrays" class="sidebar-link">Reading arrays</a></li><li class="sidebar-sub-header"><a href="/loader.html#custom-classes" class="sidebar-link">Custom classes</a></li></ul></li><li class="sidebar-sub-header"><a href="/loader.html#api" class="sidebar-link">API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/loader.html#static-members" class="sidebar-link">Static members</a></li><li class="sidebar-sub-header"><a href="/loader.html#module-instance-utility" class="sidebar-link">Module instance utility</a></li><li class="sidebar-sub-header"><a href="/loader.html#module-instance-runtime-interface" class="sidebar-link">Module instance runtime interface</a></li></ul></li><li class="sidebar-sub-header"><a href="/loader.html#convenience-vs-efficiency" class="sidebar-link">Convenience vs. efficiency</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/loader.html#more-convenient-tools" class="sidebar-link">More convenient tools</a></li></ul></li><li class="sidebar-sub-header"><a href="/loader.html#advanced-usage" class="sidebar-link">Advanced usage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/loader.html#direct-memory-access" class="sidebar-link">Direct memory access</a></li><li class="sidebar-sub-header"><a href="/loader.html#typescript-definitions" class="sidebar-link">TypeScript definitions</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/memory.html" class="sidebar-link">Memory</a></li><li><a href="/garbage-collection.html" class="sidebar-link">Garbage Collection</a></li><li><a href="/peculiarities.html" class="sidebar-link">Peculiarities</a></li><li><a href="/portability.html" class="sidebar-link">Portability</a></li><li><a href="/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/interoperability.html" class="sidebar-link">Interoperability</a></li><li><a href="/development.html" class="sidebar-link">Development</a></li><li><a href="/transforms.html" class="sidebar-link">Transforms</a></li></ul></section></li></ul> </aside> <main class="page" data-v-d1fc1622> <div class="theme-default-content content__default" data-v-d1fc1622><h1 id="loader"><a href="#loader" class="header-anchor">#</a> Loader</h1> <p>AssemblyScript provides a tiny <a href="https://github.com/AssemblyScript/assemblyscript/tree/master/lib/loader" target="_blank" rel="noopener noreferrer">module loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that makes working with AssemblyScript modules as convenient as it gets without sacrificing efficiency. It about mirrors the relevant parts of the WebAssembly API while also providing utility to allocate and read strings, arrays and classes.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> loader <span class="token keyword">from</span> <span class="token string">&quot;@assemblyscript/loader&quot;</span><span class="token punctuation">;</span> <span class="token comment">// or require</span>
loader<span class="token punctuation">.</span><span class="token function">instantiate</span><span class="token punctuation">(</span>
  <span class="token comment">// Binary to instantiate</span>
  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;optimized.wasm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// or fs.readFileSync</span>
                           <span class="token comment">// or fs.promises.readFile</span>
                           <span class="token comment">// or just a buffer</span>
  <span class="token comment">// Additional imports</span>
  <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> exports <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>The loader basically instantiates the module using <code>WebAssembly</code> APIs, but also adds additional utility to it while evaluating export names and making a nice object structure of them. For example, if one exports an entire class <code>Foo</code> from the module, there will be an <code>exports.Foo</code> constructor etc. available when using the loader.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Allocating objects or invoking the GC externally requires compiling with <code>--exportRuntime</code>. See: <a href="/garbage-collection.html">Garbage collection</a>.</p></div> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <p>For each version of the AssemblyScript compiler, there is a standalone version of the loader that can be installed from <a href="https://www.npmjs.com/package/@assemblyscript/loader" target="_blank" rel="noopener noreferrer">npm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --save @assemblyscript/loader
</code></pre></div><p>On the web:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- ESM --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/@assemblyscript/loader/index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- UMD --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/@assemblyscript/loader/umd/index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If you need a <a href="https://github.com/AssemblyScript/assemblyscript/releases" target="_blank" rel="noopener noreferrer">specific version<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> of the loader, append the respective version number as usual.</p></div> <h2 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h2> <p>One task the loader does not perform is to implicitly translate between WebAssembly pointers and JavaScript objects, and that's where the mixed in utility comes into play. For example, if one has</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// AssemblyScript</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">concat</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
</code></pre></div><p>and then wants to call <code>concat</code> externally, the string arguments cannot just be JavaScript strings but must first be allocated in the module's memory with their lifetime tracked, like so:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// JavaScript</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> concat <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports
<span class="token keyword">const</span> <span class="token punctuation">{</span> __newString<span class="token punctuation">,</span> __getString <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports

<span class="token keyword">function</span> <span class="token function">doConcat</span><span class="token punctuation">(</span><span class="token parameter">aStr<span class="token punctuation">,</span> bStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> aPtr <span class="token operator">=</span> <span class="token function">__newString</span><span class="token punctuation">(</span>aStr<span class="token punctuation">)</span>
  <span class="token keyword">let</span> bPtr <span class="token operator">=</span> <span class="token function">__newString</span><span class="token punctuation">(</span>bStr<span class="token punctuation">)</span>
  <span class="token keyword">let</span> cPtr <span class="token operator">=</span> <span class="token function">concat</span><span class="token punctuation">(</span>aPtr<span class="token punctuation">,</span> bPtr<span class="token punctuation">)</span>
  <span class="token keyword">let</span> cStr <span class="token operator">=</span> <span class="token function">__getString</span><span class="token punctuation">(</span>cPtr<span class="token punctuation">)</span>
  <span class="token keyword">return</span> cStr
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">doConcat</span><span class="token punctuation">(</span><span class="token string">&quot;Hello &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="creating-arrays"><a href="#creating-arrays" class="header-anchor">#</a> Creating arrays</h3> <p>Arrays (or more advanced classes for that matter) require a bit more cooperation because we need to know their value type in order to work with them properly. To achieve this, every class has a unique id internally, and a chunk of runtime type information (RTTI) is shipped with the module to evaluate class types. Here's an example of working with an <code>Int32Array</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// AssemblyScript</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>arr<span class="token operator">:</span> <span class="token builtin">Int32Array</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">i32</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> <span class="token function">unchecked</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> sum
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> Int32Array_ID <span class="token operator">=</span> <span class="token generic-function"><span class="token function">idof</span><span class="token generic class-name"><span class="token operator">&lt;</span>Int32Array<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// JavaScript</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> sum<span class="token punctuation">,</span> Int32Array_ID <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports
<span class="token keyword">const</span> <span class="token punctuation">{</span> __newArray <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports

<span class="token keyword">function</span> <span class="token function">doSum</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arrPtr <span class="token operator">=</span> <span class="token function">__newArray</span><span class="token punctuation">(</span>Int32Array_ID<span class="token punctuation">,</span> values<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token function">sum</span><span class="token punctuation">(</span>arrPtr<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">doSum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>This works with all kinds of arrays, except that ids are different and values are interpreted differently, of course.</p> <h3 id="reading-arrays"><a href="#reading-arrays" class="header-anchor">#</a> Reading arrays</h3> <p>If one is instead interested in the values of an array being returned by the module, there are two approaches to this. Let's say we have the following module:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// AssemblyScript</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getRandomArray</span><span class="token punctuation">(</span>len<span class="token operator">:</span> <span class="token builtin">i32</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int32Array</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Int32Array</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span>
  <span class="token comment">// fill with random values</span>
  <span class="token keyword">return</span> arr
<span class="token punctuation">}</span>
</code></pre></div><p>The first is, obviously, to read the array's values from the module's memory by essentially copying them to a JS array</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// JavaScript</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> getRandomArray <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports
<span class="token keyword">const</span> <span class="token punctuation">{</span> __getArray <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports

<span class="token keyword">function</span> <span class="token function">doGetRandomArray</span><span class="token punctuation">(</span><span class="token parameter">len</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arrPtr <span class="token operator">=</span> <span class="token function">getRandomArray</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span>
  <span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token function">__getArray</span><span class="token punctuation">(</span>arrPtr<span class="token punctuation">)</span>
  <span class="token keyword">return</span> values
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">doGetRandomArray</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>which is always safe, while the second is to create a live view on the array, enabling two-way modification of its values:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// JavaScript</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> getRandomArray <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports
<span class="token keyword">const</span> <span class="token punctuation">{</span> __getArrayView<span class="token punctuation">,</span> __pin<span class="token punctuation">,</span> __unpin <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports

<span class="token keyword">function</span> <span class="token function">doGetRandomArrayView</span><span class="token punctuation">(</span><span class="token parameter">len</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arrPtr <span class="token operator">=</span> <span class="token function">__pin</span><span class="token punctuation">(</span><span class="token function">getRandomArray</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// pin if necessary</span>
  <span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token function">__getArrayView</span><span class="token punctuation">(</span>arrPtr<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> ptr<span class="token punctuation">,</span> view <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> randomArray <span class="token operator">=</span> <span class="token function">doGetRandomArrayView</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>randomArray<span class="token punctuation">.</span>view<span class="token punctuation">)</span>
<span class="token function">__unpin</span><span class="token punctuation">(</span>randomArray<span class="token punctuation">.</span>ptr<span class="token punctuation">)</span> <span class="token comment">// unpin if necessary</span>
</code></pre></div><p>The latter variant can be more efficient (and useful) but is a little dangerous because the view may become detached from the module's memory when memory automatically grows. Also, the viewed array can grow automatically when pushed to, with the view then referencing random memory. Pushing to an array can be avoided quite easily, yet it is notoriously hard to predict when module memory grows - but one can try to set a sufficiently large size of <code>--initialMemory</code> or defensively trigger a sufficiently large dynamic allocation being freed immediately before dealing with potentially problematic views.</p> <h3 id="custom-classes"><a href="#custom-classes" class="header-anchor">#</a> Custom classes</h3> <p>As mentioned earlier, the loader understands how to make a nice object structure of a module's exports, and it is possible to utilize it to work with classes in a more natural way. For example, when calling the following function externally</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// AssemblyScript</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> str<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>str
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Foo <span class="token punctuation">{</span> <span class="token comment">// this one</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>one can wrap the received pointer in a <code>myModule.exports.Foo</code> instance:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// JavaScript</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Foo<span class="token punctuation">,</span> getFoo <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports
<span class="token keyword">const</span> <span class="token punctuation">{</span> __getString<span class="token punctuation">,</span> __pin<span class="token punctuation">,</span> __unpin <span class="token punctuation">}</span> <span class="token operator">=</span> myModule<span class="token punctuation">.</span>exports

<span class="token keyword">const</span> fooPtr <span class="token operator">=</span> <span class="token function">__pin</span><span class="token punctuation">(</span><span class="token function">getFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// pin if necessary</span>
<span class="token keyword">const</span> foo <span class="token operator">=</span> Foo<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>fooPtr<span class="token punctuation">)</span>
<span class="token keyword">const</span> strPtr <span class="token operator">=</span> foo<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">__getString</span><span class="token punctuation">(</span>strPtr<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">__unpin</span><span class="token punctuation">(</span>fooPtr<span class="token punctuation">)</span> <span class="token comment">// unpin if necessary</span>
</code></pre></div><h2 id="api"><a href="#api" class="header-anchor">#</a> API</h2> <p>For reference, here comes the full API provided by the loader.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Copying from and extending the examples above is typically sufficient.</p></div> <h3 id="static-members"><a href="#static-members" class="header-anchor">#</a> Static members</h3> <ul><li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">instantiate</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  moduleOrBuffer<span class="token operator">:</span> WasmInstantiable<span class="token punctuation">,</span>
  imports<span class="token operator">?</span><span class="token operator">:</span> WasmImports
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ASUtil <span class="token operator">&amp;</span> <span class="token constant">T</span><span class="token operator">&gt;</span>
</code></pre></div><p>Asynchronously instantiates an AssemblyScript module from anything that can be instantiated.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">instantiateSync</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  moduleOrBuffer<span class="token operator">:</span> WasmInstantiable<span class="token punctuation">,</span>
  imports<span class="token operator">?</span><span class="token operator">:</span> WasmImports
<span class="token punctuation">)</span><span class="token operator">:</span> ASUtil <span class="token operator">&amp;</span> <span class="token constant">T</span>
</code></pre></div><p>Synchronously instantiates an AssemblyScript module from a WebAssembly.Module or binary buffer. Not recommended.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">instantiateStreaming</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  response<span class="token operator">:</span> Response <span class="token operator">|</span> PromiseLike<span class="token operator">&lt;</span>Response<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  imports<span class="token operator">?</span><span class="token operator">:</span> WasmImports
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ASUtil <span class="token operator">&amp;</span> <span class="token constant">T</span><span class="token operator">&gt;</span>
</code></pre></div><p>Asynchronously instantiates an AssemblyScript module from a response, i.e. as obtained by fetch.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">demangle</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  exports<span class="token operator">:</span> WasmExports<span class="token punctuation">,</span>
  baseModule<span class="token operator">?</span><span class="token operator">:</span> Object
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span>
</code></pre></div><p>Demangles an AssemblyScript module's exports to a friendly object structure. You usually don't have to call this manually as instantiation does this implicitly.</p></li></ul> <p>Note that <code>T</code> above can either be omitted if the shape of the module is unknown, or can reference a <code>.d.ts</code> (i.e. <code>typeof MyModule</code>) as produced by the compiler with the <code>-d</code> option.</p> <h3 id="module-instance-utility"><a href="#module-instance-utility" class="header-anchor">#</a> Module instance utility</h3> <p>The following utility functions are mixed into the module's exports.</p> <ul><li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__newString</span><span class="token punctuation">(</span>str<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
</code></pre></div><p>Allocates a new string in the module's memory and returns a pointer to it. Requires <code>--exportRuntime</code> for access to <code>__new</code>.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__newArray</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> values<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
</code></pre></div><p>Allocates a new array in the module's memory and returns a pointer to it. The <code>id</code> is the unique runtime id of the respective array class. If you are using <code>Int32Array</code> for example, the best way to know the id is an <code>export const Int32Array_ID = idof&lt;Int32Array&gt;()</code>. Requires <code>--exportRuntime</code> for access to <code>__new</code>.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__getString</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span>
</code></pre></div><p>Copies a string's value from the module's memory to a JavaScript string. <code>ptr</code> must not be zero.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__getArrayBuffer</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">ArrayBuffer</span>
</code></pre></div><p>Copies an ArrayBuffer's value from the module's memory to a JavaScript buffer. <code>ptr</code> must not be zero.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__getArray</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><p>Copies an array's values from the module's memory to a JavaScript array. Infers the array type from RTTI. <code>ptr</code> must not be zero.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__getArrayView</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> TypedArray
</code></pre></div><p>Gets a live view on the values of an array in the module's memory. Infers the array type from RTTI. <code>ptr</code> must not be zero.</p> <p>This differs from <code>__getArray</code> in that the data isn't copied but remains live in both directions. That's faster but also unsafe because if the array grows or becomes garbage collected, the view will no longer represent the correct memory region and modifying its values in this state will most likely corrupt memory or otherwise explode. Use, but use with care.</p></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">__getInt8ArrayView</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int8Array</span>
<span class="token keyword">function</span> <span class="token function">__getUint8ArrayView</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Uint8Array</span>
<span class="token keyword">function</span> <span class="token function">__getUint8ClampedArrayView</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Uint8ClampedArray</span>
<span class="token keyword">function</span> <span class="token function">__getInt16ArrayView</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int16Array</span>
<span class="token keyword">function</span> <span class="token function">__getUint16ArrayView</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Uint16Array</span>
<span class="token keyword">function</span> <span class="token function">__getInt32ArrayView</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int32Array</span>
<span class="token keyword">function</span> <span class="token function">__getUint32ArrayView</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Uint32Array</span>
<span class="token keyword">function</span> <span class="token function">__getInt64ArrayView</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> BigInt64Array
<span class="token keyword">function</span> <span class="token function">__getUint64ArrayView</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> BigUint64Array
<span class="token keyword">function</span> <span class="token function">__getFloat32ArrayView</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Float32Array</span>
<span class="token keyword">function</span> <span class="token function">__getFloat64ArrayView</span><span class="token punctuation">(</span>ptr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Float64Array</span>
</code></pre></div><p>Slightly more efficient variants of <code>__getArrayView</code> where the type of the array is know beforehand. Doesn't try to infer the type.</p></li></ul> <h3 id="module-instance-runtime-interface"><a href="#module-instance-runtime-interface" class="header-anchor">#</a> Module instance runtime interface</h3> <p>When compiling with <code>--exportRuntime</code>, the loader will expose the runtime interface (<code>__new</code>, <code>__pin</code>, <code>__unpin</code>, <code>__collect</code>) as well. See: <a href="/garbage-collection.html">Garbage collection</a></p> <h2 id="convenience-vs-efficiency"><a href="#convenience-vs-efficiency" class="header-anchor">#</a> Convenience vs. efficiency</h2> <p>Making the loader's API any more convenient has its tradeoffs. One would either have to include extended type information with the module itself or generate an additional JavaScript file of glue code that does (and hides) all the lifting. As such, one can consider the loader as a small and efficient building block that can do it all, yet does not sacrifice efficiency. If that's not exactly what you are looking for, take a look at more convenient tools below. Just remember that these have tradeoffs.</p> <h3 id="more-convenient-tools"><a href="#more-convenient-tools" class="header-anchor">#</a> More convenient tools</h3> <ul><li><a href="https://github.com/torch2424/as-bind" target="_blank" rel="noopener noreferrer">as-bind<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a library, built on top of the loader, to make passing high-level data structures between AssemblyScript and JavaScript more convenient.</li></ul> <h2 id="advanced-usage"><a href="#advanced-usage" class="header-anchor">#</a> Advanced usage</h2> <h3 id="direct-memory-access"><a href="#direct-memory-access" class="header-anchor">#</a> Direct memory access</h3> <p>All of the above can be mixed with direct <a href="/memory.html">memory</a> accesses on <code>myModule.exports.memory.buffer</code>, for instance by adhering to <a href="/interoperability.html#class-layout">class layout</a>.</p> <h3 id="typescript-definitions"><a href="#typescript-definitions" class="header-anchor">#</a> TypeScript definitions</h3> <p>The compiler is able to emit definitions using the <code>-d</code> command line option that are compatible with modules demangled by the loader, and these can be used for proper typings in development:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// TypeScript</span>
<span class="token keyword">import</span> MyModule <span class="token keyword">from</span> <span class="token string">&quot;myModule&quot;</span><span class="token punctuation">;</span> <span class="token comment">// pointing at the generated d.ts</span>

loader<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">instantiate</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">typeof</span> MyModule<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;myModule.wasm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> exports <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit" data-v-d1fc1622><div class="edit-link"><a href="https://github.com/AssemblyScript/website/edit/master/src/loader.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav" data-v-d1fc1622><p class="inner"><span class="prev">
      ←
      <a href="/exports-and-imports.html" class="prev">
        Exports and imports
      </a></span> <span class="next"><a href="/memory.html">
        Memory
      </a>
      →
    </span></p></div> <div class="footer" data-v-d1fc1622 data-v-8ef39a8a><p data-v-d1fc1622 data-v-8ef39a8a><span class="item" data-v-d1fc1622 data-v-8ef39a8a>Apache-2.0 licensed</span>,
      <span class="item" data-v-d1fc1622 data-v-8ef39a8a>Copyright © 2021</span> <span class="item" data-v-d1fc1622 data-v-8ef39a8a>The AssemblyScript Project</span></p></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3bfbe3db.js" defer></script><script src="/assets/js/4.f26c5c7a.js" defer></script><script src="/assets/js/3.afc46ada.js" defer></script><script src="/assets/js/37.d4f7dc90.js" defer></script>
  </body>
</html>
